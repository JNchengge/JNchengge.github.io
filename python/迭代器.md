### **iterator**
- 可以直接用for循环的对象都是可迭代的（iterable）
- 常见的可迭代对象：`list,tuple,dict,set,str`; 文件对象 ; 在类中定义了`__iter__`方法的对象
- 可以被`next()`函数调用并且不断返回下一个值的对象成为迭代器
- **生成器**都是<font color=#AA0000><i>iterator对象</i></font>，但是`list,dict,str`虽然都是可迭代的但是不是迭代器
- 可以使用`iter()`函数将他们变为<font color=#AA0000><i>iterator</i></font>
- 可以使用`isinstance()`函数判断对象是否可以迭代
 - 用法：isinstance(对象,iterator/iterable)

###### 定义可迭代对象的方法：
    
    class Iter_obj:
    """简单定义一个可迭代对象"""
        def __iter__(self):
            return self #简单返回自身，但实际可能不会这么用

- 这里实现了__iter__()方法
![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-1.PNG)

###### 使用hasattr()函数检验对象中是否含有属性：hasattr(对象，name))

![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-2.PNG)

- 显然，<font color=#AA0000><i>it</i></font>是<font color=#AA0000><i>Iterable</i></font>且是含有`__iter__`属性的实例
但是在使用`iter()`函数将其转换为<font color=#AA0000><i>Iterator</i></font>的时候出现了类型错误，因为`iter()`返回了一个非<font color=#AA0000><i>Iterator</i></font>的对象
- 如果把<font color=#AA0000><i>Iter_obj</i></font>的返回对象修改一下，比如将其改为<font color=#AA0000><i>Iterable</i></font>但却不是<font color=#AA0000><i>Iterator</i></font>的列表
- 这里要先在`__init__()`里面给`self`加一个列表对象
- 然后再在`__iter__()`里面把这个列表用`iter()`函数转换为<font color=#AA0000><i>Iterator</i></font>

![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-3.PNG)
![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-4.PNG)

1. 首先，it这个实例它不是Iterator
2. 第二，it它包含__iter__这个属性
3. 第三，使用iter()函数的时候，python成功将it转换为了Iterator，但是后续使用isinstance()函数验证时，却发现it不是Iterator

![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-5.PNG)

- 根据上面这个实验可以知道，iter()函数其实是将Iterable的对象重新开了一个Iterator（相当于强制类型转换），但是不改变原来对象

- 所以，通过这次实验可以发现，在创建类的时候，含有__iter__()方法说明后续在实用类的时候，iter()函数可以调用该类的数据（也就是说iter()可以调用含__iter__()方法的类），但是__iter__()必须返回一个可迭代的对象（反例为return self的例子）

- 最后一点，如果一个类中不含__iter__()方法，且这个类中含有__getitem__()方法时，使用isinstance()函数检测时，它不是Iterable的

![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-6.PNG)
![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-9.PNG)

###### 可以猜测：像list,dict,tuple,set这种Iterable，可以getitem，也可以被iter()函数调用的对象，都是有__iter__()方法以及__getitem__()方法的

![](https://cdn.jsdelivr.net/gh/JNchengge/image@master/iterator-7.PNG)

###### 可以做出总结：
1. 一个可迭代的对象一定是实现了__iter__和__next__方法的对象（可以被next()调用）
2. 可以直接用for循环的对象不一定可迭代，比如没有实现__iter__方法但是实现了__getitem__方法的对象
3. 实现了__getitem__但是不可迭代的对象，可以使用iter()函数将其转换为Iterator，可以使用next()函数